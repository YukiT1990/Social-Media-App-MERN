(this["webpackJsonpsocial-media-design"]=this["webpackJsonpsocial-media-design"]||[]).push([[0],{104:function(e,t,s){},105:function(e,t,s){},106:function(e,t,s){},107:function(e,t,s){},108:function(e,t,s){},109:function(e,t,s){},110:function(e,t,s){},111:function(e,t,s){},112:function(e,t,s){},113:function(e,t,s){},114:function(e,t,s){"use strict";s.r(t);var c=s(0),a=s.n(c),n=s(11),r=s.n(n),i=s(5),l=s(4),o=s.n(l),j=s(10),u=(s(77),s(151)),d=s(152),b=s(153),h=s(154),m=s(143),p=s(155),O=s(156),x=s(9),f=s(15),g=s(65),v=s(25),N=function AuthReducer(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};case"FOLLOW":return Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)(Object(v.a)({},e.user),{},{followings:[].concat(Object(g.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(v.a)(Object(v.a)({},e),{},{user:Object(v.a)(Object(v.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},I=s(1),C={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},w=Object(c.createContext)(C),k=function AuthContextProvider(e){var t=e.children,s=Object(c.useReducer)(N,C),a=Object(i.a)(s,2),n=a[0],r=a[1];return Object(c.useEffect)((function(){localStorage.setItem("user",JSON.stringify(n.user))}),[n.user]),Object(I.jsx)(w.Provider,{value:{user:n.user,isFetching:n.isFetching,error:n.error,dispatch:r},children:t})},_=(s(79),s(140)),y=s(144),S=s(145),L=s(146),F=s(147),P=s(148),R=s(149),T=s(150);s(80);function CloseFriend(e){var t=e.user,s="http://localhost:8800/images/";return Object(I.jsxs)("li",{className:"sidebarFriend",children:[Object(I.jsx)("img",{className:"sidebarFriendImg",src:t.profilePicture?s+t.profilePicture:"".concat(s,"fish/noAvatar.jpg"),alt:""}),Object(I.jsx)("span",{className:"sidebarFriendName",children:t.username})]})}var E=s(6),B=s.n(E);function Sidebar(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),s=t[0],a=t[1];return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function _callee(){var e;return o.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get("/users/all");case 3:e=t.sent,a(e.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),_callee,null,[[0,7]])})));return function getAllUsers(){return e.apply(this,arguments)}})()()}),[]),Object(I.jsx)("div",{className:"sidebar",children:Object(I.jsxs)("div",{className:"sidebarWrapper",children:[Object(I.jsxs)("ul",{className:"sidebarList",children:[Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(_.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Feed"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(m.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(y.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Videos"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(S.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Groups"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(L.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Bookmarks"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(F.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Questions"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(P.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Jobs"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(R.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Events"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(T.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Courses"})]})]}),Object(I.jsx)("button",{className:"sidebarButton",children:"Show More"}),Object(I.jsx)("hr",{className:"sidebarHr"}),Object(I.jsx)("h3",{children:"All Users"}),Object(I.jsx)("ul",{className:"sidebarFriendList",children:s.map((function(e){return Object(I.jsx)(f.b,{to:"/profile/"+e.username,style:{textDecoration:"none",color:"black"},children:Object(I.jsx)(CloseFriend,{user:e},e.id)},e._id)}))})]})})}function Topbar(){var e=Object(c.useContext)(w),t=e.user,s=e.dispatch,a="http://localhost:8800/images/",n=Object(c.useState)(!1),r=Object(i.a)(n,2),l=r[0],g=r[1],v=Object(c.useState)(),N=Object(i.a)(v,2),C=N[0],k=N[1],_=Object(x.h)(),y=Object(c.useState)(null),S=Object(i.a)(y,2),L=S[0],F=S[1],P=function updateWidth(e){F(window.innerWidth)},R=Object(c.useState)(null),T=Object(i.a)(R,2),E=T[0],U=T[1],D=Object(c.useRef)(),A=Object(c.useState)([]),H=Object(i.a)(A,2),W=H[0],$=H[1],V=Object(c.useState)([]),G=Object(i.a)(V,2),M=G[0],q=G[1];Object(c.useEffect)((function(){return window.addEventListener("resize",P,{capture:!1,passive:!0}),function(){return window.removeEventListener("resize",P)}})),Object(c.useEffect)((function(){console.log("close sidebar and rightbar"),k(!1),U(null),$([]),q([])}),[_.pathname]);return Object(c.useEffect)((function(){E?(function(){var e=Object(j.a)(o.a.mark((function _callee(){var e;return o.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get("/users/search/"+E);case 3:e=t.sent,$(e.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),_callee,null,[[0,7]])})));return function searchUsers(){return e.apply(this,arguments)}}()(),function(){var e=Object(j.a)(o.a.mark((function _callee2(){var e;return o.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get("/posts/search/"+E);case 3:e=t.sent,q(e.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),_callee2,null,[[0,7]])})));return function searchPosts(){return e.apply(this,arguments)}}()()):($([]),q([]))}),[E]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"topbarContainer",children:[Object(I.jsxs)("div",{className:"topbarLeft",children:[Object(I.jsxs)("div",{className:"sidebarIcon",onClick:function onClick(){return k(!C)},children:[!C&&Object(I.jsx)(u.a,{}),C&&Object(I.jsx)(d.a,{})]}),Object(I.jsx)(f.b,{to:"/",style:{textDecoration:"none"},children:Object(I.jsx)("span",{className:"logo",children:"Under The Water"})})]}),Object(I.jsxs)("div",{className:"topbarCenter",children:[Object(I.jsxs)("div",{className:"searchbar",children:[Object(I.jsx)(b.a,{className:"searchIcon"}),Object(I.jsx)("input",{placeholder:"Search for friend or post",className:"searchInput",ref:D,defaultValue:E,onChange:D.current?function(){return U(D.current.value)}:function(){return U(null)}})]}),Object(I.jsx)("div",{className:"searchIconForSmallScreen",children:Object(I.jsx)(b.a,{className:"searchIcon",onClick:function onClick(){return g(!l)},style:{textDecoration:"none",color:"white"}})})]}),Object(I.jsxs)("div",{className:"topbarRight",children:[Object(I.jsxs)("div",{className:"topbarLinks",children:[Object(I.jsx)(f.b,{to:"/",style:{textDecoration:"none"},children:Object(I.jsx)("span",{className:"topbarLink",children:"Homepage"})}),Object(I.jsx)(f.b,{to:"/profile/".concat(t.username),style:{textDecoration:"none"},children:Object(I.jsx)("span",{className:"topbarLink",children:"Timeline"})}),t&&Object(I.jsx)("span",{className:"topbarLink",onClick:function logoutHandler(){s({type:"LOGOUT"})},children:"Logout"}),!t&&Object(I.jsx)(f.b,{to:"/login",style:{textDecoration:"none"},children:Object(I.jsx)("span",{className:"topbarLink",children:"Login"})})]}),Object(I.jsxs)("div",{className:"topbarIcons",children:[Object(I.jsxs)("div",{className:"topbarIconItem",children:[Object(I.jsx)(h.a,{}),Object(I.jsx)("span",{className:"topbarIconBadge",children:"1"})]}),Object(I.jsxs)("div",{className:"topbarIconItem",children:[Object(I.jsx)(m.a,{}),Object(I.jsx)("span",{className:"topbarIconBadge",children:"2"})]}),Object(I.jsxs)("div",{className:"topbarIconItem",children:[Object(I.jsx)(p.a,{}),Object(I.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]}),Object(I.jsx)(f.b,{to:"/profile/".concat(t.username),children:Object(I.jsx)("img",{src:t.profilePicture?a+t.profilePicture:a+"fish/noAvatar.jpg",alt:"",className:"topbarImg"})}),Object(I.jsx)("div",{className:"smallscreen",children:Object(I.jsx)(f.b,{to:"/rightbar/".concat(t.username),style:{textDecoration:"none",color:"white"},children:Object(I.jsx)(O.a,{})})})]})]}),l&&Object(I.jsx)("div",{className:"searchInputForSmallScreen",children:Object(I.jsx)("input",{placeholder:"Search for friend or post",className:"searchInput",ref:D,defaultValue:E,onChange:D.current?function(){return U(D.current.value)}:function(){return U(null)}})}),Object(I.jsxs)("div",{className:"searchresults",children:[L<1100&&C&&Object(I.jsx)("div",{className:"sidebar",children:Object(I.jsx)(Sidebar,{})}),E&&W&&W.length>0&&Object(I.jsx)("h3",{children:"User"}),W&&W.length>0&&W.map((function(e){return Object(I.jsx)(f.b,{to:"/profile/"+e.username,style:{textDecoration:"none",color:"black"},children:Object(I.jsx)("p",{children:e.username})},e._id)})),E&&M&&M.length>0&&Object(I.jsx)("h3",{children:"Post"}),M&&M.length>0&&M.map((function(e){return Object(I.jsx)(f.b,{to:"/post/".concat(e._id),style:{textDecoration:"none",color:"black"},children:Object(I.jsx)("p",{children:e.desc&&e.desc.length<50?e.desc:e.desc.substring(0,50)})},e._id)}))]})]})}s(104);var U=s(158),D=s(64),A=s(157),H=s(168),W=s(169);function Post(e){var t=e.post,s=Object(c.useState)(t.likes.length),n=Object(i.a)(s,2),r=n[0],l=n[1],u=Object(c.useState)(!1),d=Object(i.a)(u,2),b=d[0],h=d[1],m=Object(c.useState)({}),p=Object(i.a)(m,2),O=p[0],x=p[1],g="http://localhost:8800/images/",v=Object(c.useContext)(w).user,N=a.a.useState(null),C=Object(i.a)(N,2),k=C[0],_=C[1],y=Object(c.useRef)(),S=Object(c.useState)(!1),L=Object(i.a)(S,2),F=L[0],P=L[1],R=Object(c.useState)(),T=Object(i.a)(R,2),E=T[0],$=T[1];Object(c.useEffect)((function(){h(t.likes.includes(v._id))}),[v._id,t.likes]),Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function _callee(){var e;return o.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,B.a.get("/users?userId=".concat(t.userId));case 2:e=s.sent,x(e.data);case 4:case"end":return s.stop()}}),_callee)})));return function fetchUser(){return e.apply(this,arguments)}})()()}),[t.userId]);var V=function likeHandler(){try{B.a.put("/posts/"+t._id+"/like",{userId:v._id})}catch(e){}l(b?r-1:r+1),h(!b)},G=function handleClose(){_(null)};return Object(I.jsx)("div",{className:"post",children:Object(I.jsxs)("div",{className:"postWrapper",children:[Object(I.jsxs)("div",{className:"postTop",children:[Object(I.jsxs)("div",{className:"postTopLeft",children:[Object(I.jsx)(f.b,{to:"/profile/".concat(O.username),children:Object(I.jsx)("img",{className:"postProfileImg",src:O.profilePicture?g+O.profilePicture:"".concat(g,"fish/noAvatar.jpg"),alt:""})}),Object(I.jsx)("span",{className:"postUsername",children:O.username}),Object(I.jsx)("span",{className:"postDate",children:Object(D.a)(t.createdAt)})]}),Object(I.jsx)("div",{className:"postTopRight",children:O._id===v._id&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(A.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function handleClick(e){_(e.currentTarget)},children:Object(I.jsx)(U.a,{})}),Object(I.jsxs)(H.a,{id:"simple-menu",anchorEl:k,keepMounted:!0,open:Boolean(k),onClose:G,children:[Object(I.jsx)(W.a,{onClick:function editingHandler(){$(null===t||void 0===t?void 0:t.desc),G(),P(!0)},children:"Edit"}),Object(I.jsx)(W.a,{onClick:function deleteHandler(){try{B.a.delete("/posts/"+t._id,{userId:v._id}),window.location.reload()}catch(e){console.log(e)}},children:"Delete"}),Object(I.jsx)(W.a,{onClick:G,children:"Close"})]})]})})]}),Object(I.jsxs)("div",{className:"postCenter",children:[!F&&Object(I.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),F&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("form",{onSubmit:function updateHandler(){var e={userId:v._id,desc:y.current.value};try{B.a.put("/posts/"+t._id,e),window.location.reload()}catch(s){console.log(s)}P(!1)},className:"updateForm",children:[Object(I.jsx)("input",{value:E,className:"postEdit",ref:y,onChange:function onChange(e){return function changeHandler(e){$(e)}(e.target.value)}}),Object(I.jsx)("button",{className:"updateButoon",type:"submit",children:"Update"})]}),Object(I.jsx)("button",{onClick:function onClick(){return P(!1)},className:"cancelButton",children:"Cancel Editing"})]}),Object(I.jsx)("img",{className:"postImg",src:g+t.img,alt:""})]}),Object(I.jsxs)("div",{className:"postBottom",children:[Object(I.jsxs)("div",{className:"postBottomLeft",children:[Object(I.jsx)("img",{className:"likeIcon",src:"".concat(g,"like.png"),onClick:V,alt:""}),Object(I.jsx)("img",{className:"likeIcon",src:"".concat(g,"heart.png"),onClick:V,alt:""}),Object(I.jsxs)("span",{className:"postLikeCounter",children:[r," fish like it"]})]}),Object(I.jsx)("div",{className:"postBottomRight",children:Object(I.jsxs)("span",{className:"postCommentText",children:[t.comment," comments"]})})]})]})})}s(105);var $=s(159),V=s(160),G=s(161),M=s(162),q=s(163);function Share(){var e=Object(c.useContext)(w).user,t="http://localhost:8800/images/",s=Object(c.useRef)(),a=Object(c.useState)(null),n=Object(i.a)(a,2),r=n[0],l=n[1],u=function(){var t=Object(j.a)(o.a.mark((function _callee(t){var c,a,n;return o.a.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(t.preventDefault(),c={userId:e._id,desc:s.current.value},!r){i.next=17;break}return a=new FormData,n=Date.now()+r.name,a.append("name",n),a.append("file",r),c.img=n,console.log(c),i.prev=9,i.next=12,B.a.post("/upload",a);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(9),console.log(i.t0);case 17:return i.prev=17,i.next=20,B.a.post("/posts",c);case 20:window.location.reload(),i.next=26;break;case 23:i.prev=23,i.t1=i.catch(17),console.log(i.t1);case 26:case"end":return i.stop()}}),_callee,null,[[9,14],[17,23]])})));return function submitHandler(e){return t.apply(this,arguments)}}();return Object(I.jsx)("div",{className:"share",children:Object(I.jsxs)("div",{className:"shareWrapper",children:[Object(I.jsxs)("div",{className:"shareTop",children:[Object(I.jsx)("img",{className:"shareProfileImg",src:e.profilePicture?t+e.profilePicture:t+"fish/noAvatar.jpg",alt:""}),Object(I.jsx)("input",{placeholder:"What's up "+e.username+"?",className:"shareInput",ref:s})]}),Object(I.jsx)("hr",{className:"shareHr"}),r&&Object(I.jsxs)("div",{className:"shareImgContainer",children:[Object(I.jsx)("img",{className:"shareImg",src:URL.createObjectURL(r),alt:""}),Object(I.jsx)($.a,{className:"shareCancelImg",onClick:function onClick(){return l(null)}})]}),Object(I.jsxs)("form",{className:"shareBottom",onSubmit:u,children:[Object(I.jsxs)("div",{className:"shareOptions",children:[Object(I.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(I.jsx)(V.a,{htmlColor:"tomato",className:"shareIcon"}),Object(I.jsx)("span",{className:"shareOptionText",children:"Photo or Video"}),Object(I.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function onChange(e){return l(e.target.files[0])}})]}),Object(I.jsxs)("div",{className:"shareOption",children:[Object(I.jsx)(G.a,{htmlColor:"blue",className:"shareIcon"}),Object(I.jsx)("span",{className:"shareOptionText",children:"Tag"})]}),Object(I.jsxs)("div",{className:"shareOption",children:[Object(I.jsx)(M.a,{htmlColor:"green",className:"shareIcon"}),Object(I.jsx)("span",{className:"shareOptionText",children:"Location"})]}),Object(I.jsxs)("div",{className:"shareOption",children:[Object(I.jsx)(q.a,{htmlColor:"goldenrod",className:"shareIcon"}),Object(I.jsx)("span",{className:"shareOptionText",children:"Feelings"})]})]}),Object(I.jsx)("button",{className:"shareButton",type:"submit",children:"Share"})]})]})})}s(106);function Feed(e){var t=e.username,s=Object(c.useState)([]),a=Object(i.a)(s,2),n=a[0],r=a[1],l=Object(c.useContext)(w).user;return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function _callee(){var e;return o.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:if(!t){s.next=6;break}return s.next=3,B.a.get("/posts/profile/"+t);case 3:s.t0=s.sent,s.next=9;break;case 6:return s.next=8,B.a.get("posts/timeline/"+l._id);case 8:s.t0=s.sent;case 9:e=s.t0,r(e.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return s.stop()}}),_callee)})));return function fetchPosts(){return e.apply(this,arguments)}})()()}),[t,l._id]),Object(I.jsx)("div",{className:"feed",children:Object(I.jsxs)("div",{className:"feedWrapper",children:[0===n.length&&Object(I.jsx)("p",{className:"nopost",children:"No post yet."}),(!t||t===l.username)&&Object(I.jsx)(Share,{}),n.map((function(e){return Object(I.jsx)(Post,{post:e},e._id)}))]})})}s(107),s(108);function Online(e){var t=e.user;return Object(I.jsxs)("li",{className:"rightbarFriend",children:[Object(I.jsxs)("div",{className:"rightbarProfileImgCountainer",children:[Object(I.jsx)("img",{className:"rightbarProfileImg",src:"http://localhost:8800/images/"+t.profilePicture,alt:""}),Object(I.jsx)("span",{className:"rightbarOnline"})]}),Object(I.jsx)("span",{className:"rightbarUsername",children:t.username})]})}var z=s(164),K=s(165),J=s(166);function Rightbar(e){var t=e.user,s="http://localhost:8800/images/",a=Object(c.useState)([]),n=Object(i.a)(a,2),r=n[0],l=n[1],u=Object(c.useContext)(w),d=u.user,b=u.dispatch,h=Object(c.useState)(d.followings.includes(null===t||void 0===t?void 0:t._id)),m=Object(i.a)(h,2),p=m[0],O=m[1],x=Object(c.useState)(!1),g=Object(i.a)(x,2),v=g[0],N=g[1],C=Object(c.useRef)(),k=Object(c.useRef)(),_=Object(c.useRef)(),y=Object(c.useState)([]),S=Object(i.a)(y,2),L=S[0],F=S[1];Object(c.useEffect)((function(){O(d.followings.includes(null===t||void 0===t?void 0:t._id))}),[d,null===t||void 0===t?void 0:t._id,p]),Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function _callee(){var e;return o.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,B.a.get("/users/friends/"+t._id);case 3:e=s.sent,l(e.data),s.next=10;break;case 7:s.prev=7,s.t0=s.catch(0),console.log(s.t0);case 10:case"end":return s.stop()}}),_callee,null,[[0,7]])})));return function getFriends(){return e.apply(this,arguments)}})()()}),[t]),Object(c.useEffect)((function(){fetch("https://my-json-server.typicode.com/YukiT1990/Social-Media-App-MERN/Users").then((function(e){return e.json()})).then((function(e){F(e)}),(function(e){console.log(e)}))}),[]);var P=function(){var e=Object(j.a)(o.a.mark((function _callee2(){return o.a.wrap((function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!p){e.next=7;break}return e.next=4,B.a.put("/users/".concat(t._id,"/unfollow"),{userId:d._id});case 4:b({type:"UNFOLLOW",payload:t._id}),e.next=10;break;case 7:return e.next=9,B.a.put("/users/".concat(t._id,"/follow"),{userId:d._id});case 9:b({type:"FOLLOW",payload:t._id});case 10:O(!p),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),_callee2,null,[[0,13]])})));return function handleClick(){return e.apply(this,arguments)}}(),R=function editHandler(){N(!0)},T=function editProfileHandler(e){console.log("edit submit");var s={userId:t._id,city:C.current.value,from:k.current.value,relationship:_.current.value};try{B.a.put("/users/"+t._id,s),window.location.reload()}catch(c){console.log(c)}N(!1)},E=function HomeRightbar(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"birthdayContainer",children:[Object(I.jsx)("img",{className:"birthdayImg",src:"".concat(s,"gift.png"),alt:""}),Object(I.jsxs)("span",{className:"birthdayText",children:[Object(I.jsx)("b",{children:"Commet"})," and ",Object(I.jsx)("b",{children:"3 other friends"})," have a birhday today."]})]}),Object(I.jsx)("p",{children:"Advertisement"}),Object(I.jsx)("img",{className:"rightbarAd",src:"".concat(s,"ad.jpg"),alt:""}),Object(I.jsx)("h4",{className:"rightbarTitle",children:"Users also viewed"}),Object(I.jsx)("ul",{className:"rightbarFriendList",children:L.map((function(e){return Object(I.jsx)(Online,{user:e},e.id)}))})]})},U=function ProfileRightbar(){var e="http://localhost:8800/images/";return Object(I.jsxs)(I.Fragment,{children:[t.username!==d.username&&Object(I.jsxs)("button",{className:"rightbarFollowButton",onClick:P,children:[p?"Unfollow":"Follow",p?Object(I.jsx)(z.a,{}):Object(I.jsx)(K.a,{})]}),!v&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"flexContainer",children:[Object(I.jsx)("h4",{className:"rightbarTitle",children:"User information"}),t._id===d._id&&Object(I.jsx)("span",{className:"profileEdit",children:Object(I.jsx)(J.a,{htmlColor:"Black",className:"editIcon",onClick:R})})]}),Object(I.jsxs)("div",{className:"rightbarInfo",children:[Object(I.jsxs)("div",{className:"rightbarInfoItem",children:[Object(I.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(I.jsx)("span",{className:"rightbarInfoValue",children:t.city})]}),Object(I.jsxs)("div",{className:"rightbarInfoItem",children:[Object(I.jsx)("span",{className:"rightbarInfoKey",children:"From:"}),Object(I.jsx)("span",{className:"rightbarInfoValue",children:t.from})]}),Object(I.jsxs)("div",{className:"rightbarInfoItem",children:[Object(I.jsx)("span",{className:"rightbarInfoKey",children:"Relationship:"}),Object(I.jsx)("span",{className:"rightbarInfoValue",children:1===t.relationship?"Single":2===t.relationship?"Married":"-"})]})]})]}),v&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"flexContainer",children:Object(I.jsx)("h4",{className:"rightbarTitle",children:"User information"})}),Object(I.jsxs)("form",{className:"rightbarInfo",onSubmit:T,children:[Object(I.jsxs)("div",{className:"rightbarInfoItem",children:[Object(I.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(I.jsx)("input",{defaultValue:t.city,className:"cityfromEdit",ref:C})]}),Object(I.jsxs)("div",{className:"rightbarInfoItem",children:[Object(I.jsx)("span",{className:"rightbarInfoKey",children:"From:"}),Object(I.jsx)("input",{defaultValue:t.from,className:"cityfromEdit",ref:k})]}),Object(I.jsxs)("div",{className:"rightbarInfoItem",children:[Object(I.jsx)("span",{className:"rightbarInfoKey",children:"Relationship:"}),Object(I.jsxs)("select",{defaultValue:t.relationship,ref:_,name:"relationship-menu",id:"relationship-menu",children:[Object(I.jsx)("option",{value:"1",children:"Single"}),Object(I.jsx)("option",{value:"2",children:"Married"}),Object(I.jsx)("option",{value:"3",children:" - "})]})]}),Object(I.jsx)("button",{className:"cancelButton",onClick:function onClick(){return N(!1)},children:"Cancel"}),Object(I.jsx)("button",{className:"uploadButton",type:"submit",children:"Submit"})]})]}),Object(I.jsx)("h4",{className:"rightbarTitle",children:"User friends"}),Object(I.jsx)("div",{className:"rightbarFollowings",children:r.map((function(t){return Object(I.jsx)(f.b,{to:"/profile/"+t.username,style:{textDecoration:"none"},children:Object(I.jsxs)("div",{className:"rightbarFollowing",children:[Object(I.jsx)("img",{src:t.profilePicture?e+t.profilePicture:"".concat(e,"fish/noAvatar.jpg"),alt:"",className:"rightbarFollowingImg"}),Object(I.jsx)("span",{className:"rightbarFollowingName",children:t.username})]})},t._id)}))})]})};return Object(I.jsx)("div",{className:"rightbar",children:Object(I.jsx)("div",{className:"rightbarWrapper",children:t?Object(I.jsx)(U,{}):Object(I.jsx)(E,{})})})}s(109);function Home(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Topbar,{}),Object(I.jsxs)("div",{className:"homeContainerH",children:[Object(I.jsx)("div",{className:"sidebarContainerH",children:Object(I.jsx)(Sidebar,{})}),Object(I.jsx)("div",{className:"feedContainerH",children:Object(I.jsx)(Feed,{})}),Object(I.jsx)("div",{className:"rightbarContainerH",children:Object(I.jsx)(Rightbar,{})})]})]})}s(110);var Q=function(){var e=Object(j.a)(o.a.mark((function _callee(e,t){var s;return o.a.wrap((function _callee$(c){for(;;)switch(c.prev=c.next){case 0:return t({type:"LOGIN_START"}),c.prev=1,c.next=4,B.a.post("/auth/login",e);case 4:s=c.sent,t({type:"LOGIN_SUCCESS",payload:s.data}),c.next=11;break;case 8:c.prev=8,c.t0=c.catch(1),t({type:"LOGIN_FAILURE",payload:c.t0});case 11:case"end":return c.stop()}}),_callee,null,[[1,8]])})));return function loginCall(t,s){return e.apply(this,arguments)}}(),Y=s(167);function Login(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useContext)(w),a=s.user,n=s.isFetching,r=s.dispatch;return console.log(a),Object(I.jsx)("div",{className:"login",children:Object(I.jsxs)("div",{className:"loginWrapper",children:[Object(I.jsxs)("div",{className:"loginLeft",children:[Object(I.jsx)("h3",{className:"loginLogo",children:"Under The Water"}),Object(I.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you."})]}),Object(I.jsx)("div",{className:"loginRight",children:Object(I.jsxs)("form",{className:"loginBox",onSubmit:function handleClick(s){s.preventDefault(),Q({email:e.current.value,password:t.current.value},r)},children:[Object(I.jsx)("input",{placeholder:"Email",type:"email",required:!0,className:"loginInput",ref:e}),Object(I.jsx)("input",{placeholder:"Password",type:"password",required:!0,minLength:"6",className:"loginInput",ref:t}),Object(I.jsx)("button",{className:"loginButton",type:"submit",disabled:n,children:n?Object(I.jsx)(Y.a,{color:"white",size:"20px"}):"Log In"}),Object(I.jsx)("span",{className:"loginForgot",children:"Forgot Password?"}),Object(I.jsx)(f.b,{to:"/register",children:Object(I.jsx)("button",{className:"loginRegisterButton",children:n?Object(I.jsx)(Y.a,{color:"white",size:"20px"}):"Create a New Account"})})]})})]})})}s(111);function Profile(){var e="http://localhost:8800/images/",t=Object(c.useState)({}),s=Object(i.a)(t,2),a=s[0],n=s[1],r=Object(x.i)().username,l=Object(c.useState)(!1),u=Object(i.a)(l,2),d=u[0],b=u[1],h=Object(c.useState)(!1),m=Object(i.a)(h,2),p=m[0],O=m[1],f=Object(c.useState)(!1),g=Object(i.a)(f,2),v=g[0],N=g[1],C=Object(c.useState)(null),k=Object(i.a)(C,2),_=k[0],y=k[1],S=Object(c.useState)(null),L=Object(i.a)(S,2),F=L[0],P=L[1],R=Object(c.useRef)(),T=Object(c.useContext)(w).user,E=function(){var e=Object(j.a)(o.a.mark((function _callee(e){var t,s,c;return o.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),t={userId:a._id},!_){n.next=18;break}return s=new FormData,c=Date.now()+_.name,t={userId:a._id,profilePicture:c},s.append("name",c),s.append("file",_),t.profilePicture=c,console.log(t),n.prev=10,n.next=13,B.a.post("/upload",s);case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(10),console.log(n.t0);case 18:return n.prev=18,n.next=21,B.a.put("/users/"+a._id,t);case 21:window.location.reload(),n.next=27;break;case 24:n.prev=24,n.t1=n.catch(18),console.log(n.t1);case 27:O(!1);case 28:case"end":return n.stop()}}),_callee,null,[[10,15],[18,24]])})));return function submitUserImgHandler(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(o.a.mark((function _callee2(e){var t,s,c;return o.a.wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),t={userId:a._id},!F){n.next=18;break}return s=new FormData,c=Date.now()+F.name,t={userId:a._id,coverPicture:c},s.append("name",c),s.append("file",F),t.coverPicture=c,console.log(t),n.prev=10,n.next=13,B.a.post("/upload",s);case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(10),console.log(n.t0);case 18:return n.prev=18,n.next=21,B.a.put("/users/"+a._id,t);case 21:window.location.reload(),n.next=27;break;case 24:n.prev=24,n.t1=n.catch(18),console.log(n.t1);case 27:N(!1);case 28:case"end":return n.stop()}}),_callee2,null,[[10,15],[18,24]])})));return function submitCoverImgHandler(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function _callee3(){var e;return o.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("/users?username=".concat(r));case 2:e=t.sent,n(e.data);case 4:case"end":return t.stop()}}),_callee3)})));return function fetchUser(){return e.apply(this,arguments)}})()()}),[r]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(Topbar,{}),Object(I.jsxs)("div",{className:"profile",children:[Object(I.jsx)("div",{className:"sidebarContainerProfile",children:Object(I.jsx)(Sidebar,{})}),Object(I.jsxs)("div",{className:"profileRight",children:[Object(I.jsxs)("div",{className:"profileRightTop",children:[Object(I.jsxs)("div",{className:"profileCover",children:[Object(I.jsxs)("form",{className:"shareBottom",onSubmit:U,children:[Object(I.jsx)("img",{className:"profileCoverImg",src:a.coverPicture?e+a.coverPicture:e+"fish/noCover.jpg",alt:""}),Object(I.jsxs)("label",{htmlFor:"coverImgFile",children:[a._id===T._id&&Object(I.jsx)("span",{className:"coverImgEdit",children:Object(I.jsx)(J.a,{htmlColor:"Black",className:"editImg",onClick:function onClick(){return N(!0)}})}),Object(I.jsx)("input",{style:{display:"none"},type:"file",id:"coverImgFile",accept:".png,.jpeg,.jpg",onChange:function onChange(e){return P(e.target.files[0])}})]}),v&&Object(I.jsxs)("div",{className:"messageboardC",children:[!F&&Object(I.jsx)("p",{children:"File Name"}),F&&Object(I.jsx)("p",{children:F.name}),Object(I.jsxs)("div",{className:"buttons",children:[Object(I.jsx)("button",{className:"cancelButton",onClick:function onClick(){return N(!1)},children:"Cancel"}),Object(I.jsx)("button",{className:"uploadButton",type:"submit",children:"Upload Cover Image"})]})]})]}),Object(I.jsxs)("form",{className:"shareBottom",onSubmit:E,children:[Object(I.jsx)("img",{className:"profileUserImg",src:a.profilePicture?e+a.profilePicture:e+"fish/noAvatar.jpg",alt:""}),Object(I.jsxs)("label",{htmlFor:"userImgfile",children:[a._id===T._id&&Object(I.jsx)("span",{className:"userImgEdit",children:Object(I.jsx)(J.a,{htmlColor:"Black",className:"editImg",onClick:function onClick(){return O(!0)}})}),Object(I.jsx)("input",{style:{display:"none"},type:"file",id:"userImgfile",accept:".png,.jpeg,.jpg",onChange:function onChange(e){return y(e.target.files[0])}})]}),p&&Object(I.jsxs)("div",{className:"messageboardU",children:[!_&&Object(I.jsx)("p",{children:"File Name"}),_&&Object(I.jsx)("p",{children:_.name}),Object(I.jsxs)("div",{className:"buttons",children:[Object(I.jsx)("button",{className:"cancelButton",onClick:function onClick(){return O(!1)},children:"Cancel"}),Object(I.jsx)("button",{className:"uploadButton",type:"submit",children:"Upload Profile Image"})]})]})]})]}),!d&&Object(I.jsxs)("div",{className:"profileInfo",children:[Object(I.jsx)("h4",{className:"profileInfoName",children:a.username}),Object(I.jsx)("span",{className:"profileInfoDesc",children:a.desc?a.desc:"Add description"}),a._id===T._id&&Object(I.jsx)("span",{className:"descEdit",children:Object(I.jsx)(J.a,{htmlColor:"Black",className:"editImg",onClick:function onClick(){return function editDescHandler(){b(!0)}()}})})]}),d&&Object(I.jsxs)("form",{className:"profileInfo",onSubmit:function editProfileHandler(e){console.log("edit submit");var t={userId:a._id,desc:R.current.value};try{B.a.put("/users/"+a._id,t),window.location.reload()}catch(s){console.log(s)}b(!1)},children:[Object(I.jsx)("h4",{className:"profileInfoName",children:a.username}),Object(I.jsx)("textarea",{defaultValue:a.desc,className:"descForm",ref:R}),Object(I.jsxs)("div",{className:"buttonsDesc",children:[Object(I.jsx)("button",{className:"cancelButton",onClick:function onClick(){return b(!1)},children:"Cancel"}),Object(I.jsx)("button",{className:"uploadButton",type:"submit",children:"Submit"})]})]})]}),a._id!==T._id&&Object(I.jsx)("div",{className:"rightbarContainerForSmallscreen",children:Object(I.jsx)(Rightbar,{user:a})}),Object(I.jsxs)("div",{className:"profileRightBottom",children:[Object(I.jsx)("div",{className:"feedContainerProfile",children:Object(I.jsx)(Feed,{username:r})}),Object(I.jsx)("div",{className:"rightbarContainerProfile",children:Object(I.jsx)(Rightbar,{user:a})})]})]})]})]})}s(112);function Register(){var e=Object(c.useRef)(),t=Object(c.useRef)(),s=Object(c.useRef)(),a=Object(c.useRef)(),n=Object(x.g)(),r=function(){var c=Object(j.a)(o.a.mark((function _callee(c){var r;return o.a.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(c.preventDefault(),a.current.value===s.current.value){i.next=5;break}a.current.setCustomValidity("Passwords don't match!"),i.next=15;break;case 5:return r={username:e.current.value,email:t.current.value,password:s.current.value},i.prev=6,i.next=9,B.a.post("/auth/register",r);case 9:n.push("/login"),i.next=15;break;case 12:i.prev=12,i.t0=i.catch(6),console.log(i.t0);case 15:case"end":return i.stop()}}),_callee,null,[[6,12]])})));return function handleClick(e){return c.apply(this,arguments)}}();return Object(I.jsx)("div",{className:"register",children:Object(I.jsxs)("div",{className:"registerWrapper",children:[Object(I.jsxs)("div",{className:"registerLeft",children:[Object(I.jsx)("h3",{className:"registerLogo",children:"Under The Water"}),Object(I.jsx)("span",{className:"registerDesc",children:"Connect with friends and the world around you."})]}),Object(I.jsx)("div",{className:"registerRight",children:Object(I.jsxs)("form",{className:"registerBox",onSubmit:r,children:[Object(I.jsx)("input",{placeholder:"Username",required:!0,ref:e,className:"registerInput"}),Object(I.jsx)("input",{placeholder:"Email",required:!0,ref:t,className:"registerInput",type:"email"}),Object(I.jsx)("input",{placeholder:"Password",required:!0,ref:s,className:"registerInput",type:"password",minLength:"6"}),Object(I.jsx)("input",{placeholder:"Password Again",required:!0,ref:a,className:"registerInput",type:"password"}),Object(I.jsx)("button",{className:"registerButton",type:"submit",children:"Sign Up"}),Object(I.jsx)(f.b,{to:"/login",children:Object(I.jsx)("button",{className:"registerLoginButton",children:"Log into Account"})})]})})]})})}s(113);var X=function RightbarPage(){var e=Object(c.useState)({}),t=Object(i.a)(e,2),s=t[0],a=t[1],n=Object(x.i)().username;return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function _callee(){var e;return o.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("/users?username=".concat(n));case 2:e=t.sent,a(e.data);case 4:case"end":return t.stop()}}),_callee)})));return function fetchUser(){return e.apply(this,arguments)}})()()}),[n]),Object(I.jsxs)("div",{className:"rightbarPage",children:[Object(I.jsx)(Topbar,{}),s&&Object(I.jsx)(Rightbar,{user:s}),Object(I.jsx)(Rightbar,{})]})},Z=function TargetPost(){var e=Object(x.h)(),t=Object(c.useState)(e.pathname.substring(6)),s=Object(i.a)(t,2),a=s[0],n=s[1],r=Object(c.useState)(),l=Object(i.a)(r,2),u=l[0],d=l[1];return Object(c.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function _callee(){var e;return o.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.get("/posts/"+a);case 3:e=t.sent,d(e.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),_callee,null,[[0,7]])})));return function getTargetPost(){return e.apply(this,arguments)}})()()}),[a]),Object(c.useEffect)((function(){n(e.pathname.substring(6))}),[e.pathname]),console.log("postid: "+a),Object(I.jsxs)("div",{className:"targetPostPage",children:[Object(I.jsx)(Topbar,{}),u&&Object(I.jsx)(Post,{post:u})]})};var ee=function App(){var e=Object(c.useContext)(w).user,t=Object(c.useState)(null),s=Object(i.a)(t,2),a=s[0],n=s[1],r=function updateWidth(e){n(window.innerWidth)};return Object(c.useEffect)((function(){return window.addEventListener("resize",r,{capture:!1,passive:!0}),function(){return window.removeEventListener("resize",r)}})),Object(I.jsx)(f.a,{children:Object(I.jsxs)(x.d,{children:[Object(I.jsx)(x.b,{exact:!0,path:"/",children:e?Object(I.jsx)(Home,{}):Object(I.jsx)(Login,{})}),Object(I.jsx)(x.b,{path:"/login",children:e?Object(I.jsx)(x.a,{to:"/"}):Object(I.jsx)(Login,{})}),Object(I.jsx)(x.b,{path:"/register",children:e?Object(I.jsx)(x.a,{to:"/"}):Object(I.jsx)(Register,{})}),Object(I.jsx)(x.b,{path:"/profile/:username",children:e?Object(I.jsx)(Profile,{}):Object(I.jsx)(x.a,{to:"/login"})}),Object(I.jsx)(x.b,{path:"/rightbar/:username",children:e?a<800?Object(I.jsx)(X,{}):Object(I.jsx)(Profile,{}):Object(I.jsx)(x.a,{to:"/login"})}),Object(I.jsx)(x.b,{path:"/post/:postid",children:e?Object(I.jsx)(Z,{}):Object(I.jsx)(Register,{})})]})})};r.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(k,{children:Object(I.jsx)(ee,{})})}),document.getElementById("root"))},77:function(e,t,s){},79:function(e,t,s){},80:function(e,t,s){}},[[114,1,2]]]);
//# sourceMappingURL=main.b4beedfb.chunk.js.map